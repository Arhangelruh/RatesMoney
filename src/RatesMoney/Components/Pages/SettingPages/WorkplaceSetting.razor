@page "/WorkplaceSetting"
@using RatesMoney.Services



<div class="text-center">
	<div class="col-6 mx-auto w-75 mt-5">
		<h2 class="overflow-auto">Текущий код: @workplaceCode</h2>
		<p class="mt-2">Введите код рабочего места</p>
		
		<div class="w-75 mx-auto">
            <input @bind="@workplace" name="workplace" id="workplace" class="w-100" type="number" />
            <FormButton OnClickCallback="@SaveWorkplaceCode">Сохранить</FormButton>
		</div>
	</div>
</div>


@code {

    private string? workplaceCode{ get; set; }
    int workplace { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await GetWorkplace();
    }

    private async Task SaveWorkplaceCode() {
        await AppConfiguration.SetWorkplaceCode(workplace);
        await GetWorkplace();
    }

    private async Task GetWorkplace()
    {
        int code = await AppConfiguration.GetWorkplaceCode();
        if (code != -1)
        {
            workplaceCode = code.ToString();
            workplace = code;
        }
        else
        {
            workplaceCode = "Не задан";
        }
    }   
}
